# IDS Training Data Generator

## 프로그램 목적 및 정의

### IDS_Training_Data_Generator.py 트래픽 생성 모듈의 명칭
- **침입 탐지 시스템 훈련 데이터 생성기 (IDS Training Data Generator)**


### 주요 기능 (IDS_Training_Data_Generator.py 기준)
1. **네트워크 트래픽 생성**: 다양한 유형의 테스트 트래픽 생성
   - SYN 플러드, UDP 플러드
   - HTTP Slowloris, TCP 핸드셰이크 오용
   - ARP 스푸핑, ICMP 리다이렉트
2. **패킷 캡처**: 실시간 네트워크 패킷 수집
3. **데이터 전처리**: AI 학습을 위한 데이터 정제
4. **교육 목적**: 사이버보안 학습 및 실습

## 1대 PC 성능 분석

### 하드웨어별 패킷 생성 능력

| PC 유형 | CPU | RAM | 초당 패킷 생성 | 지속 시간 | 비고 |
|---------|-----|-----|---------------|-----------|------|
| 일반 데스크톱 | i5-8400 | 8GB | 1,000-5,000 | 제한적 | 기본 성능 |
| 게이밍 PC | i7-10700K | 16GB | 5,000-15,000 | 30분-1시간 | 표준 성능 |
| 최신 모바일 | Intel Core Ultra 185H| 16-32GB | 8,000-20,000 | 45분-1.5시 |저전력 고성능 |
| 게이밍 특화 |5800X3D |32GB| 12,000-30,000 | 1-2시간|3D V-Cache 최적화 |
| 워크스테이션 | i9-12900K | 32GB | 10,000-50,000 | 1-2시간 | 고성능 |
| 서버급 | Xeon E5-2690 | 64GB | 50,000-100,000+ | 지속 가능 | 전문 용도 |



### 네트워크 대역폭 제한

| 연결 유형 | 최대 대역폭 | 실제 활용률 | 패킷/초 (64바이트) |
|-----------|-------------|-------------|-------------------|
| 100Mbps 이더넷 | 100Mbps | ~80Mbps | ~156,250 |
| 1Gbps 이더넷 | 1Gbps | ~900Mbps | ~1,750,000 |
| Wi-Fi 802.11ac | 866Mbps | ~400Mbps | ~781,250 |
| Wi-Fi 6E | 2.4Gbps | ~1.5Gbps | ~2,929,688 |

## 테스트 환경별 상세 분석

### 소규모 테스트 환경 (기초 AI 모델 훈련) 

#### 환경 특성 및 성능
- **대상 시스템**: 개발 서버, VM 환경, 로컬 테스트 환경
- **서버 처리 능력**: 1,000-10,000 연결/초
- **네트워크 대역폭**: 100Mbps-1Gbps
- **동시 접속 시뮬레이션**: 10-100개 세션
- **필요 PC 수**: **1-2대**

#### IDS AI 모델 훈련 목적
- **기초 데이터 수집**: 기본적인 공격 패턴 데이터 생성
- **모델 프로토타입**: 초기 IDS 알고리즘 검증
- **특징 추출 학습**: 네트워크 패킷의 기본 특징 학습
- **이진 분류 모델**: 정상/비정상 트래픽 구분 학습

#### 하드웨어 요구사항
```
대상 서버:
- CPU: 2-4코어 (i3, i5 급)
- RAM: 4-8GB
- 네트워크: 100Mbps-1Gbps

테스트 PC:
- CPU: Intel Core Ultra 185H 또는 5800X3D
- RAM: 16GB 이상
- 네트워크: 1Gbps 권장
```

#### 성능 계산 및 PC 수 산정

**Intel Core Ultra 185H 기준:**
```
- 목표: AI 훈련용 데이터 생성 (서버 자원 70-80% 사용)
- 서버 처리 능력: 5,000 연결/초
- 1대 PC 성능: 15,000 패킷/초
- 필요 PC 수: 5,000 × 0.75 ÷ 15,000 = 약 1대로 충분
```

**AMD Ryzen 5800X3D 기준:**
```
- 목표: AI 훈련용 데이터 생성 (서버 자원 70-80% 사용)
- 서버 처리 능력: 5,000 연결/초
- 1대 PC 성능: 20,000 패킷/초
- 필요 PC 수: 5,000 × 0.75 ÷ 20,000 = 약 1대로 충분
```

#### AI 모델 훈련용 테스트 시나리오
```python
# 기초 IDS 훈련 데이터 생성
데이터 수집 목표: 10,000-50,000개 패킷
공격 유형: SYN 플러드, UDP 플러드, 정상 트래픽
데이터 라벨링: 자동 라벨링 (공격/정상)
훈련 데이터 비율: 70% 훈련, 30% 검증
특징 추출: IP, 포트, 프로토콜, 패킷 크기, 시간 간격
```

### 중간 규모 테스트 환경 (고도화 AI 모델 훈련) 

#### 환경 특성 및 성능
- **대상 시스템**: 통합 테스트 서버, 클러스터 환경
- **서버 처리 능력**: 10,000-50,000 연결/초
- **네트워크 대역폭**: 1Gbps-10Gbps
- **동시 접속 시뮬레이션**: 100-1,000개 세션
- **필요 PC 수**: **1-3대** (고성능 CPU 사용 시)

#### IDS AI 모델 훈련 목적
- **고급 패턴 학습**: 복합 공격 패턴 및 변종 탐지
- **다중 클래스 분류**: 세분화된 공격 유형 분류 (SYN 플러드, UDP 플러드, DDoS 등)
- **실시간 탐지 모델**: 스트리밍 데이터 처리 모델 훈련
- **앙상블 모델**: 여러 알고리즘 조합을 통한 정확도 향상
- **딥러닝 모델**: CNN, RNN, LSTM 기반 시계열 분석

#### 하드웨어 요구사항
```
대상 서버:
- CPU: 8-16코어 (i7, Xeon E3 급)
- RAM: 16-32GB
- 네트워크: 1Gbps-10Gbps
- 스토리지: SSD 권장 (빠른 데이터 읽기/쓰기)

테스트 PC (1-3대):
- CPU: 고성능 멀티코어 (i7, i9, Ryzen 7/9)
- RAM: 32GB 이상
- 네트워크: 1Gbps 이상
- GPU: CUDA 지원 (딥러닝 모델 훈련 시)
```

#### 성능 계산 및 PC 수 산정

**Intel Core Ultra 185H 기준:**
```
- 목표: 대량 AI 훈련 데이터 생성 (서버 자원 80-90% 사용)
- 서버 처리 능력: 30,000 연결/초
- 1대 PC 성능: 15,000 패킷/초
- 필요 PC 수: 30,000 × 0.85 ÷ 15,000 = 약 2대
```

**AMD Ryzen 5800X3D 기준:**
```
- 목표: 대량 AI 훈련 데이터 생성 (서버 자원 80-90% 사용)
- 서버 처리 능력: 30,000 연결/초
- 1대 PC 성능: 20,000 패킷/초
- 필요 PC 수: 30,000 × 0.85 ÷ 20,000 = 약 1-2대
```

#### AI 모델 훈련용 테스트 시나리오
```python
# 고도화 IDS 훈련 데이터 생성
데이터 수집 목표: 100,000-500,000개 패킷
공격 유형: 다중 벡터 공격 (SYN+UDP+HTTP Slowloris+ARP 스푸핑)
데이터 라벨링: 세분화된 라벨링 (공격 유형별, 강도별)
훈련 데이터 비율: 60% 훈련, 20% 검증, 20% 테스트
특징 추출: 통계적 특징, 시간 윈도우 기반 특징, 네트워크 플로우 특징
모델 유형: Random Forest, XGBoost, Neural Network, LSTM
```


## 환경별 IDS AI 모델 훈련 비교표

| 구분 | 소규모 (기초) | 중간규모 (고도화) | 
|------|-----------------|-------------------|
| **서버 사양** | 2-4코어, 4-8GB | 8-16코어, 16-32GB | 
| **데이터 수집량** | 10K-50K 패킷 | 100K-500K 패킷 | 
| **테스트 PC 수** | 1-2대 | 1-3대 | 10-20대 |
| **AI 모델 복잡도** | 기초 (이진분류) | 중급 (다중분류) |
| **훈련 시간** | 30분-2시간 | 2-8시간 | 

## IDS AI 모델 훈련 가이드

### **훈련 목적별 환경 추천**

| AI 모델 목적 | 추천 환경 | 예상 정확도 | 훈련 데이터 |
|-------------|-----------|-------------|-------------|
| **기초 이진 분류** | 소규모 | 85-90% | 10K-50K 패킷 |
| **다중 공격 분류** | 중간 규모 | 90-95% | 100K-500K 패킷 |
| **실시간 탐지 모델** | 중간 규모 | 92-97% | 200K-1M 패킷 |


###  **CPU별 IDS 훈련 최적화 설정**

#### Intel Core Ultra 185H
```python
# IDS 훈련 최적화 설정
패킷 수: 10,000-50,000개 (소규모), 100,000개 (중간규모)
배치 크기: 25-30개
메모리: 16GB 이상
발열 관리: 30분마다 5분 휴식
AI 프레임워크: scikit-learn, XGBoost (CPU 최적화)
```

#### AMD Ryzen 5800X3D
```python
# IDS 훈련 최적화 설정
패킷 수: 50,000-100,000개 (소규모), 500,000개 (중간규모)
배치 크기: 50개
메모리: 32GB 권장
캐시 활용: 큰 패킷 캐시 크기 (500개)
AI 프레임워크: PyTorch, TensorFlow (메모리 집약적 작업)
```

### ⚙️ **IDS 프로젝트 구성 예시**

```python
# 프로젝트 구조
IDS_Project/
├── IDS_Training_Data_Generator.py          # 트래픽 생성 및 데이터 수집
├── data/
│   ├── raw_packets/            # 원시 패킷 데이터
│   ├── processed/              # 전처리된 데이터
│   └── labeled/                # 라벨링된 훈련 데이터
├── models/
│   ├── basic_classifier.py     # 기초 이진 분류 모델
│   ├── multi_classifier.py     # 다중 공격 분류 모델
│   └── deep_learning.py        # 딥러닝 모델
├── training/
│   ├── train_basic.py          # 기초 모델 훈련
│   └── train_advanced.py       # 고급 모델 훈련
└── evaluation/
    ├── metrics.py              # 성능 평가 지표
    └── visualization.py        # 결과 시각화
```

### **IDS AI 모델 훈련 시 주의사항**

1. **데이터 품질**: 정확한 라벨링과 균형잡힌 데이터셋
2. **과적합 방지**: 검증 데이터를 통한 성능 모니터링
3. **실시간 성능**: 모델 복잡도와 탐지 속도의 균형
4. **지속적 학습**: 새로운 공격 패턴에 대한 모델 업데이트

**1단계 (소규모)**: 기초 이진 분류 모델 개발 및 검증
**2단계 (중간규모)**: 다중 클래스 분류 모델로 확장
**3단계 (중간규모+)**: 실시간 탐지 및 딥러닝 모델 적용
**4단계 (선택)**: 대규모 환경에서 성능 최적화

##  VMware 기반 네트워크 공격 시뮬레이션 및 학습 계획 (소규모/중규모)

###  STEP 1: 가상머신 환경 구축

#### 소규모/중규모 환경에 최적화된 가상화 플랫폼

**가상화 플랫폼 지원 현황**

| 가상화 플랫폼 | Windows Host | Linux Host | macOS Host | 소규모 적합도 |
|---------------|--------------|------------|------------|---------------|
| **VMware Workstation/Fusion** | ✅ 지원 | ✅ 지원 | ✅ 지원 | 🟢 최적 |
| **VirtualBox** | ✅ 지원 | ✅ 지원 | ✅ 지원 | 🟡 적합 |


**게스트 OS 구성 현황 (소규모/중규모)**

| 운영체제 | IDS 시스템 | 침입 테스트 | 용도 | 최소 사양 | 권장 사양 |
|----------|------------|-------------|------|-----------|-----------|
| **Ubuntu 20.04 LTS** | ✅ 최적화 | ✅ 지원 | IDS 메인 시스템 | RAM: 2GB, HDD: 15GB | RAM: 4GB, HDD: 20GB |
| **Kali Linux** | ✅ 지원 | ✅ 최적화 | 침입 테스트 도구 | RAM: 2GB, HDD: 20GB | RAM: 4GB, HDD: 25GB |

> **소규모 권장**: Ubuntu VM (2GB RAM) + Kali Linux VM (2GB RAM) = 총 4GB RAM  
> **중규모 권장**: Ubuntu VM (4GB RAM) + Kali Linux VM (4GB RAM) = 총 8GB RAM

#### 가상머신 환경 확인 명령어
```bash
# 가상머신 정보 확인
uname -a

# 게스트 OS 확인 (Ubuntu)
cat /etc/os-release

# 메모리 사용량 확인
free -h

# 네트워크 인터페이스 확인
ip addr show
```

###  STEP 2: 소규모/중규모 테스트베드 네트워크 구성

#### 간소화된 네트워크 토폴로지

```
┌─────────────────┐    ┌─────────────────┐
│  KALI LINUX VM  │    │  UBUNTU IDS VM  │
│    (Attacker)   │    │   (Defender)    │
│                 │    │                 │
│ IP: 192.168.1.10│◄───┤ IP: 192.168.1.20│
│ Penetration     │    │ IDS System      │
│ Testing Tools   │    │ ML Detection    │
└─────────────────┘    └─────────────────┘
         │                       │
         └───────────────────────┘
                    │
           ┌─────────────────┐
           │  VMware NAT     │
           │ (192.168.1.0/24)│
           └─────────────────┘
```

#### 소규모/중규모 환경별 네트워크 설정

| 환경 규모 | VM 수 | 네트워크 모드 | 메모리 요구량 | 테스트 복잡도 |
|-----------|-------|---------------|---------------|---------------|
| **소규모** | 2대 | Host-Only | 4-6GB | 기초 공격 패턴 |
| **중규모** | 2-3대 | NAT + Host-Only | 8-12GB | 다중 벡터 공격 |

###  STEP 3: 소규모/중규모 공격 시뮬레이션 시나리오

#### 소규모 시나리오: 기초 공격 패턴 학습

**목표**: 10,000-50,000 패킷 수집, 이진 분류 모델 학습

**환경 구성:**
```bash
# Kali Linux (공격자) - 192.168.1.10 (2GB RAM)
# Ubuntu IDS (방어자) - 192.168.1.20 (2GB RAM)
```

**기초 공격 시나리오:**
1. **SYN Flood 공격 (5,000 패킷)**
   ```bash
   # Kali Linux에서 실행
   python3 IDS_Training_Data_Generator.py
   # 트래픽 생성 → SYN Flood 선택 → 대상: 192.168.1.20 → 패킷 수: 5,000
   ```

2. **UDP Flood 공격 (5,000 패킷)**
   ```bash
   # Kali Linux에서 실행
   python3 IDS_Training_Data_Generator.py
   # 트래픽 생성 → UDP Flood 선택 → 대상: 192.168.1.20 → 패킷 수: 5,000
   ```

3. **정상 트래픽 수집 (30,000 패킷)**
   ```bash
   # Ubuntu IDS에서 일반 웹 브라우징, ping 등 정상 활동
   ping -c 100 8.8.8.8
   wget http://example.com
   ```

#### 중규모 시나리오: 다중 벡터 공격

**목표**: 100,000-500,000 패킷 수집, 다중 분류 모델 학습

**환경 구성:**
```bash
# Kali Linux (공격자) - 192.168.1.10 (4GB RAM)
# Ubuntu IDS (방어자) - 192.168.1.20 (4GB RAM)
# 추가 Ubuntu VM (선택) - 192.168.1.30 (2GB RAM)
```

**복합 공격 시나리오:**
```python
# 공격 스크립트 예시 (Kali Linux)
attack_scenarios = {
    "SYN Flood": 15000,      # 15,000 패킷
    "UDP Flood": 15000,      # 15,000 패킷
    "HTTP Slowloris": 10000, # 10,000 패킷
    "ICMP Flood": 5000,      # 5,000 패킷
    "정상 트래픽": 100000     # 100,000 패킷
}

# IDS_Training_Data_Generator.py에서 순차적으로 실행
# 총 수집 목표: 145,000 패킷
```

###  소규모/중규모 학습 데이터 수집 계획

#### 소규모 환경 데이터 수집 (기초 IDS 모델)

| 공격 유형 | 수집 목표 | 라벨링 | 예상 소요시간 | AI 모델 용도 |
|-----------|-----------|--------|---------------|--------------|
| **SYN Flood** | 5,000 패킷 | 자동 | 10분 | 이진 분류 |
| **UDP Flood** | 5,000 패킷 | 자동 | 10분 | 이진 분류 |
| **정상 트래픽** | 30,000 패킷 | 자동 | 30분 | 백그라운드 |
| **총계** | **40,000 패킷** | - | **50분** | **기초 모델** |

#### 중규모 환경 데이터 수집 (고도화 IDS 모델)

| 공격 유형 | 수집 목표 | 라벨링 | 예상 소요시간 | AI 모델 용도 |
|-----------|-----------|--------|---------------|--------------|
| **SYN Flood** | 15,000 패킷 | 자동 | 20분 | 다중 분류 |
| **UDP Flood** | 15,000 패킷 | 자동 | 20분 | 다중 분류 |
| **HTTP Slowloris** | 10,000 패킷 | 자동 | 30분 | 다중 분류 |
| **ICMP Flood** | 5,000 패킷 | 자동 | 10분 | 다중 분류 |
| **정상 트래픽** | 100,000 패킷 | 자동 | 60분 | 백그라운드 |
| **총계** | **145,000 패킷** | - | **140분** | **고도화 모델** |

### 🔬 소규모/중규모 실험 계획

#### 소규모 환경 실험 일정 (1-2주)

**Week 1: 환경 구축**
- [x] VMware 환경 구축 (1일)
- [x] Ubuntu IDS VM 설치 (1일)
- [x] Kali Linux VM 설치 (1일)
- [x] 네트워크 연결 테스트 (1일)
- [x] 기본 도구 설치 및 테스트 (1일)

**Week 2-3: 기초 실험**
- [ ] SYN Flood 공격/탐지 테스트 (1일)
- [ ] UDP Flood 공격/탐지 테스트 (1일)
- [ ] 데이터 수집 및 전처리 (1일)
- [ ] 이진 분류 모델 학습 (1일)
- [ ] 성능 평가 및 문서화 (2일)

#### 중규모 환경 실험 일정 (2-3주)

**Week 1: 환경 확장**
- [ ] 기존 VM 메모리 증설 (1일)
- [ ] 추가 공격 도구 설치 (1일)
- [ ] 네트워크 설정 최적화 (1일)

**Week 2-4: 고급 실험**
- [ ] 다중 벡터 공격 시나리오 구현 (2일)
- [ ] 대용량 데이터 수집 (2일)
- [ ] 다중 분류 모델 학습 (2일)
- [ ] 성능 비교 및 최적화 (3일)
- [ ] 최종 결과 문서화 (2일)

###  소규모/중규모 성능 평가 목표

#### 소규모 환경 목표
```python
# 기초 모델 성능 목표
accuracy_target = "85-90%"
precision_target = "80% 이상"
recall_target = "80% 이상"
training_time = "30분 이하"
resource_usage = "CPU 50% 이하, RAM 4GB 이하"
```

#### 중규모 환경 목표
```python
# 고도화 모델 성능 목표
accuracy_target = "90-95%"
precision_target = "90% 이상"
recall_target = "90% 이상"
f1_score_target = "90% 이상"
training_time = "2시간 이하"
resource_usage = "CPU 70% 이하, RAM 8GB 이하"
```

###  소규모/중규모 환경별 도구 설치

#### Ubuntu IDS VM (소규모: 2GB, 중규모: 4GB)
```bash
# 경량화 패키지 설치
sudo apt update
sudo apt install python3 python3-pip tcpdump

# 필수 Python 라이브러리만 설치
pip3 install scapy scikit-learn numpy

# 소규모용 경량 모니터링 도구
sudo apt install htop iotop
```

#### Kali Linux VM (소규모: 2GB, 중규모: 4GB)
```bash
# 기본 공격 도구만 설치
sudo apt update
sudo apt install hping3 nmap

# Python 환경 최소 설정
pip3 install scapy
```

### ⚠️ 소규모/중규모 환경 고려사항

1. **메모리 관리**: 불필요한 서비스 비활성화
2. **디스크 공간**: 로그 파일 크기 제한 설정
3. **네트워크 대역폭**: 패킷 생성 속도 조절
4. **CPU 사용률**: 실험 시 다른 작업 최소화
5. **데이터 저장**: 압축된 형태로 데이터 저장

### 📝 소규모/중규모 실험 결과 템플릿

#### 소규모 실험 보고서
```markdown
## 소규모 IDS 실험 결과
- **실험 기간**: 2-3주
- **수집 데이터**: 40,000 패킷
- **모델 유형**: 이진 분류 (정상/공격)
- **달성 정확도**: XX.X%
- **사용 자원**: CPU XX%, RAM X.XGB
- **학습 시간**: XX분
```

#### 중규모 실험 보고서
```markdown
## 중규모 IDS 실험 결과
- **실험 기간**: 3-4주
- **수집 데이터**: 145,000 패킷
- **모델 유형**: 다중 분류 (정상/SYN/UDP/HTTP/ICMP)
- **달성 정확도**: XX.X%
- **사용 자원**: CPU XX%, RAM X.XGB
- **학습 시간**: XX시간 XX분
```



